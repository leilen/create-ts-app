#!/usr/bin/env node
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,s){function a(e){try{i(r.next(e))}catch(e){s(e)}}function c(e){try{i(r.throw(e))}catch(e){s(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}i((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=n.call(e,a)}catch(e){s=[6,e],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};n.__esModule=!0;var s=t(1),a=t(2),c=process.cwd(),i=null;function u(){return[{name:"package.json",type:0,content:'{\n        "name": "'+i+'",\n        "version": "1.0.0",\n        "description": "",\n        "main": "index.js",\n        "scripts": {\n          "build": "webpack -p --mode=production",\n          "pro": "node dist/app.js",\n          "start": "ts-node src/app.ts",\n          "clean": "rm -rf ./dist/* && touch ./dist/.keep"\n        },\n        "author": "",\n        "license": "ISC",\n        "devDependencies": {\n          "@types/node": "^12.7.8",\n          "ts-node": "^8.4.1",\n          "typescript": "^3.6.3",\n          "webpack-cli": "^3.3.9"\n        },\n        "dependencies": {\n          "ts-loader": "^6.2.0",\n          "webpack": "^4.41.0",\n          "webpack-node-externals": "^1.7.2"\n        }\n      }'},{name:"dist",type:1},{name:"dist/.keep",type:0},{name:"src",type:1},{name:"src/app.ts",type:0,content:"console.log('hello create-ts-app.')"},{name:"tsconfig.json",type:0,content:'{\n        "compilerOptions": {\n            "moduleResolution": "node",\n            "typeRoots": [\n                "node_modules/@types"\n            ],\n            "resolveJsonModule": true\n        },\n        "files" : ["./src/app.ts"],\n        "exclude": [\n            "node_modules",\n            "dist"\n        ]\n    }'},{name:"webpack.config.js",type:0,content:"// webpack.config.js\n  \n      const webpack = require('webpack');\n      const path = require('path');\n      const nodeExternals = require('webpack-node-externals')\n      \n      module.exports = (env, options) => {\n        let config = {\n          entry: './src/app.ts',\n          output: {\n            path: path.resolve(__dirname, 'dist'),\n            filename: 'app.js'\n          },\n          target: 'node',\n          node: {\n            __dirname: false,   // if you don't put this is, __dirname\n            __filename: false,  // and __filename return blank or /\n          },\n          externals: [\n            nodeExternals()\n          ],\n          resolve: {\n            extensions: [\".ts\"]\n          },\n          module: {\n            rules: [\n            {\n              test: /.ts$/,\n              use: ['ts-loader']\n            }\n            ]\n          }\n        }\n        return config;\n      }"},{name:".gitignore",type:0,content:"node_modules\npackage-lock.json\ndist/*\npackage-lock.json\n!/**/.keep"}]}function l(e){return new Promise((function(n){s.stat(e,(function(e){n(!e)}))}))}function p(e){return new Promise((function(n,t){s.mkdir(e,(function(e){e?t(e):n()}))}))}function f(){return r(this,void 0,void 0,(function(){var e,n,t;return o(this,(function(r){switch(r.label){case 0:r.trys.push([0,7,,8]),e=0,n=u(),r.label=1;case 1:return e<n.length?0!=(t=n[e]).type?[3,3]:[4,(o=c+"/"+i+"/"+t.name,a=t.content,new Promise((function(e,n){s.writeFile(o,a||"",(function(t){t?n(t):e()}))})))]:[3,6];case 2:return r.sent(),[3,5];case 3:return[4,p(c+"/"+i+"/"+t.name)];case 4:r.sent(),r.label=5;case 5:return e++,[3,1];case 6:return[3,8];case 7:throw r.sent();case 8:return[2]}var o,a}))}))}!function(){r(this,void 0,void 0,(function(){var e,n;return o(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(e){var n=a.createInterface({input:process.stdin,output:process.stdout});n.question("Enter project name [app] : ",(function(t){var r=t.trim();i=r?t.trim():null,n.close(),e()}))}))];case 1:return t.sent(),i?new RegExp("^(?:@[a-z0-9-~][a-z0-9-._~]*/)?[a-z0-9-~][a-z0-9-._~]*$").test(i)?[4,l(c+"/"+i)]:(console.log("Wrong project name!!"),[2]):(console.log("Must enter project name!!"),[2]);case 2:if(t.sent())return console.log("Already exist project name!!"),[2];t.label=3;case 3:return t.trys.push([3,5,,6]),[4,p(c+"/"+i)];case 4:return t.sent(),[3,6];case 5:return e=t.sent(),console.log(e),[2];case 6:return t.trys.push([6,8,,9]),[4,f()];case 7:return t.sent(),[3,9];case 8:return n=t.sent(),console.log(n),[2];case 9:return console.log("Succeed."),[2]}}))}))}()},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("readline")}]);